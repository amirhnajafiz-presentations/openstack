<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-System Security/os" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Operating System Security | GraphHub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://amirhnajafiz.github.io/graphhub/img/graphhub.jpeg"><meta data-rh="true" name="twitter:image" content="https://amirhnajafiz.github.io/graphhub/img/graphhub.jpeg"><meta data-rh="true" property="og:url" content="https://amirhnajafiz.github.io/graphhub/docs/System Security/os"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Operating System Security | GraphHub"><meta data-rh="true" name="description" content="This chapter focuses on OS security and processes. Mostly talking about UNIX systems."><meta data-rh="true" property="og:description" content="This chapter focuses on OS security and processes. Mostly talking about UNIX systems."><link data-rh="true" rel="icon" href="/graphhub/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/os"><link data-rh="true" rel="alternate" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/os" hreflang="en"><link data-rh="true" rel="alternate" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/os" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/graphhub/assets/css/styles.d2862100.css">
<script src="/graphhub/assets/js/runtime~main.c6b0cee2.js" defer="defer"></script>
<script src="/graphhub/assets/js/main.7489833a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/graphhub/"><b class="navbar__title text--truncate">GraphHub</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/graphhub/docs/">Graphs</a><a class="navbar__item navbar__link" href="/graphhub/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/amirhnajafiz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphhub/docs/">Welcome to GraphHub!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/graphhub/docs/System Security/intro">System Security</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/intro">Computer Systems Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/memerr-rand">Memory Errors: Exploits and Defenses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/vm">Processor and Virtual Machine Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphhub/docs/System Security/os">Operating System Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/crypto">Cryptography</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/policies">Security Policies and Enforcement Mechanisms</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/graphhub/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Security</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Operating System Security</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Operating System Security</h1></header>
<p>This chapter focuses on OS security and processes. Mostly talking about UNIX systems.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unix-intro">UNIX Intro<a href="#unix-intro" class="hash-link" aria-label="Direct link to UNIX Intro" title="Direct link to UNIX Intro">​</a></h2>
<p>User level is a set of processs, the kernel does not place requirements
on which processes should run. Command shell is one such process, and there can be many such command shells. Programs can spawn other programs, orchestrate them to achive higher level goals. Interconnect programs using pipes. Everything is a file in operating system. Every device is a file. File permissions provde a universal access control mechanism.</p>
<p>System Architecture:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">the users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">shell and commands, compilers and interpreters, system libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">system-call interface to the kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">signals termianl handling character I/O system terminal drivers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">file system, swapping block I/O, system disk and tape drivers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CPU scheduling, page replacement, demand paging, virtual memory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kernel interface to the hardware</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">=====================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terminal controllers, terminals | device controllers, disks and tapes | memory controllers, physical memory</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>File System organization:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/vmunix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/bin : contains binaries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/boot : contains files required for starting the system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev : contains device files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/etc : everything to configure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/home : user&#x27;s personal directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/lib : system libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/media : external storage mounted</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/mnt : where you manually mount storage devices or partitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt : software you compile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/proc : like /dev is a virtual directory that contains computer information</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/root : home directory of superuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/tmp : used for storing temporary values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/sbin : similar to /bin, but is has apps that only superuser can run</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/sys : another virtual directory contains information from devices connected to your computer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/var : contains logs</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="processes">Processes<a href="#processes" class="hash-link" aria-label="Direct link to Processes" title="Direct link to Processes">​</a></h2>
<p>Process is a program in execution which has a <strong>pid</strong>, <strong>owner</strong>, <strong>group</strong>, and other attributes. Processes have separate virtual address spaces.</p>
<p>This memory isolation provides the basis of security:</p>
<ul>
<li>a process cannot access the memory of other processes.</li>
<li>access to kernel memory controlled by page permissions.</li>
<li>read/write/execute permissions set at the granularity of a page.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-memory">Virtual memory<a href="#virtual-memory" class="hash-link" aria-label="Direct link to Virtual memory" title="Direct link to Virtual memory">​</a></h3>
<p>Each process has a logically separate address space. Memory organized into pages (4KB). Swap space is a disk space for backing up pages that don&#x27;t fit into physical memory. Processor exception when a page is not in physical memory. OS handles the exception transparently to bring this page into memory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="virtual-memory-allocation">Virtual memory allocation<a href="#virtual-memory-allocation" class="hash-link" aria-label="Direct link to Virtual memory allocation" title="Direct link to Virtual memory allocation">​</a></h4>
<p>May be OS initiated or be requested by a process (using mmap, mprotect).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-control-block-pcb">Process Control Block (PCB)<a href="#process-control-block-pcb" class="hash-link" aria-label="Direct link to Process Control Block (PCB)" title="Direct link to Process Control Block (PCB)">​</a></h3>
<p>Contains all process state that the OS needs to manage.</p>
<ul>
<li>register values</li>
<li>uid, gid, current directory, ...</li>
<li>open file table, file descriptors are indices into this table</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fork-system-call">fork system call<a href="#fork-system-call" class="hash-link" aria-label="Direct link to fork system call" title="Direct link to fork system call">​</a></h4>
<p>When using fork systemcall, child inherits all its parent attributes. So child is an exact copy of parent, except for return value of syscall (zero for child, pid of child for parent). However, copying memory is expensive. Linux uses <code>clone</code>, a generalization that allows fine control.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="execve-system-call">execve system call<a href="#execve-system-call" class="hash-link" aria-label="Direct link to execve system call" title="Direct link to execve system call">​</a></h4>
<p>Used to replace calling process with a new program. When using this system call, all of the memory is overwritten. But file descriptors are still inherited.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="exit-and-wait-system-calls">exit and wait system calls<a href="#exit-and-wait-system-calls" class="hash-link" aria-label="Direct link to exit and wait system calls" title="Direct link to exit and wait system calls">​</a></h4>
<p>Processes return a status code when they exit. Parent receives this status when it waits on a child. Child cannot fully exit until parent collects this code, otherwise it will become zombie.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-scheduling">Process Scheduling<a href="#process-scheduling" class="hash-link" aria-label="Direct link to Process Scheduling" title="Direct link to Process Scheduling">​</a></h3>
<p>Processor time is split across running processes. Scheduler is responsible for stopping one process and giving a turn to the next process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-ownership">Process ownership<a href="#process-ownership" class="hash-link" aria-label="Direct link to Process ownership" title="Direct link to Process ownership">​</a></h3>
<p>Each process has a <strong>owner (uid)</strong> and a <strong>group (gid) owner</strong>. A root process can change its uid and gid. <strong>Setuid</strong> permission bit allows uid change on execve. By default, process assumes the uid of the executable file&#x27;s owner. Allows normal users to access features that require privilege (sudo).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="userids">Userids<a href="#userids" class="hash-link" aria-label="Direct link to Userids" title="Direct link to Userids">​</a></h4>
<ul>
<li><strong>Effective userid</strong>: all access checks use this id.</li>
<li><strong>Real userid</strong>: the user that logged in. after executing a setuid executble, real user remains the same but effective user becomes root.</li>
<li><strong>Saved userid</strong>: under certain conditions, effective uid is saved in saved uid.</li>
</ul>
<p>A process is allowed to switch between its real, save, and effective userids.For fine grained control over different ids, use:</p>
<ul>
<li><code>seteuid</code></li>
<li><code>setreuid</code></li>
<li><code>setresuid</code></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="userid-vs-usernames">Userid Vs Usernames<a href="#userid-vs-usernames" class="hash-link" aria-label="Direct link to Userid Vs Usernames" title="Direct link to Userid Vs Usernames">​</a></h3>
<p>The file <code>/etc/passwd</code> maps userids to usernames. Similarly, group names are specified in <code>/etc/group</code>. Note that <code>/etc/passwd</code> is a public database, however, encrypted passwords are in <code>/etc/shadow</code> that can be read only by the root.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="file-system">File System<a href="#file-system" class="hash-link" aria-label="Direct link to File System" title="Direct link to File System">​</a></h2>
<p>A <strong>File</strong> is simply a sequence of bytes. <strong>Directory</strong> is a special file that contains information about the location of files. <strong>Path</strong> is a sequence of directory names followed by a file name. File implementation is done by using <strong>Inodes</strong>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">| mode      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| owners    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| timestaps |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| size      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| direct block  | =&gt; | data |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| single direct | =&gt; | A | B | data | data | =&gt; | block A |, | block B |, ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-system-calls">Key system calls<a href="#key-system-calls" class="hash-link" aria-label="Direct link to Key system calls" title="Direct link to Key system calls">​</a></h3>
<ul>
<li>open: returns a file descriptor for reading/writing the file</li>
<li>read, write</li>
<li>mmap : map part of a file</li>
<li>lseek : move file pointer to different places</li>
<li>chmod</li>
<li>chown</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="link-vs-file">Link vs File<a href="#link-vs-file" class="hash-link" aria-label="Direct link to Link vs File" title="Direct link to Link vs File">​</a></h2>
<p><strong>Hard link</strong> is like a file name, it points to the actual file. <strong>Symlink</strong> is a special file that has interpreted as name of another file/dir. Path-to-file translation involves dereferencing many links. OS limits the number of symlinks travered to prevent infinite loops during lookup.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-systemcalls">Key systemcalls<a href="#key-systemcalls" class="hash-link" aria-label="Direct link to Key systemcalls" title="Direct link to Key systemcalls">​</a></h3>
<ul>
<li>rename</li>
<li>link, unlink</li>
<li>mkdir, rmdir</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interprocess-communication">Interprocess Communication<a href="#interprocess-communication" class="hash-link" aria-label="Direct link to Interprocess Communication" title="Direct link to Interprocess Communication">​</a></h2>
<ul>
<li><strong>Pipe</strong> is a unidirectional communication channel, using its syscall returns a pair of fd&#x27;s, which write is in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span> and read is in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>. Moreover, errors are in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span>.</li>
<li><strong>Socketpair</strong> is similar, but allows bidirectional communication. What is written in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> can be read from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-does-io-redirection-word">How does I/O redirection word?<a href="#how-does-io-redirection-word" class="hash-link" aria-label="Direct link to How does I/O redirection word?" title="Direct link to How does I/O redirection word?">​</a></h3>
<p>Application needs no special code to support redirection. By default, all appplications read from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span>, write to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>, and display
errors on <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span></span></span></span>.</p>
<p>To redirect input from a file, simply rename the fd to 0:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dup2(orig_fd, new_fd)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To create a pipeline (<code>cat | wc</code>), create a pipe with endpoints <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>, fork to create a new child that inherits these fds. Parent closes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">0</span><span class="mclose">]</span></span></span></span> and child closes <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>d</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">fd[1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">fd</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span></span></span></span>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="socket-communication">Socket Communication<a href="#socket-communication" class="hash-link" aria-label="Direct link to Socket Communication" title="Direct link to Socket Communication">​</a></h3>
<p>Sockets may be used by servers or clients.</p>
<ul>
<li>Server steps: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>→</mo><mi>b</mi><mi>i</mi><mi>n</mi><mi>d</mi><mo>→</mo><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>n</mi><mo>→</mo><mi>a</mi><mi>c</mi><mi>c</mi><mi>e</mi><mi>p</mi><mi>t</mi><mo>→</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi mathvariant="normal">/</mi><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">create \to bind \to listen \to accept \to read/write</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">cre</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal">bin</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.1944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">cce</span><span class="mord mathnormal">pt</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></li>
<li>Client steps: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>t</mi><mi>e</mi><mo>→</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>n</mi><mi>e</mi><mi>c</mi><mi>t</mi><mo>→</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi mathvariant="normal">/</mi><mi>w</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">create \to connect \to read/write</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">cre</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord mathnormal">co</span><span class="mord mathnormal">nn</span><span class="mord mathnormal">ec</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">re</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span></span></span></span></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="signals">Signals<a href="#signals" class="hash-link" aria-label="Direct link to Signals" title="Direct link to Signals">​</a></h2>
<p>Signal is a exception-related control-flow mechanism which is modelled after hardware interrupts. A signal can suspend current processing, and gets handled by a signal handler.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-signals">Key Signals<a href="#key-signals" class="hash-link" aria-label="Direct link to Key Signals" title="Direct link to Key Signals">​</a></h3>
<ul>
<li>process control: SIGKILL, SIGTERM, SIGINT, SIGQUIT, SIGSTOP, SIGSTP, SIGCONT</li>
<li>illegal memory access: SIGSEGV, SIGBUS</li>
<li>low-level errors: SIGFPE, SIGILL, SIGABRT</li>
<li>child exited: SIGCHLD</li>
<li>timer interrupt: SIGALRM</li>
<li>input/output related condition: SIGPIPE, SIGHUP</li>
<li>bad system call: SIGSYS</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="signal-generation-delivery-and-handling">Signal generation, delivery and handling<a href="#signal-generation-delivery-and-handling" class="hash-link" aria-label="Direct link to Signal generation, delivery and handling" title="Direct link to Signal generation, delivery and handling">​</a></h3>
<p>There two types of signals, sync and async. Sync signal caused by program execution. While async signal genereted due to external events.</p>
<p>Handlers installed using signal or sigaction syscalls. These handlers use a stack that is logically distinct from the program stack.</p>
<ul>
<li><code>SIG_IGN</code> (ignore)</li>
<li><code>SIG_DFL</code> (default hanlder</li>
</ul>
<p>Signals can be blocked but there is no queue. A signal needs care because handlers execute concurrently with the program.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/graphhub/docs/System Security/vm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Processor and Virtual Machine Security</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/graphhub/docs/System Security/crypto"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cryptography</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#unix-intro" class="table-of-contents__link toc-highlight">UNIX Intro</a></li><li><a href="#processes" class="table-of-contents__link toc-highlight">Processes</a><ul><li><a href="#virtual-memory" class="table-of-contents__link toc-highlight">Virtual memory</a></li><li><a href="#process-control-block-pcb" class="table-of-contents__link toc-highlight">Process Control Block (PCB)</a></li><li><a href="#process-scheduling" class="table-of-contents__link toc-highlight">Process Scheduling</a></li><li><a href="#process-ownership" class="table-of-contents__link toc-highlight">Process ownership</a></li><li><a href="#userid-vs-usernames" class="table-of-contents__link toc-highlight">Userid Vs Usernames</a></li></ul></li><li><a href="#file-system" class="table-of-contents__link toc-highlight">File System</a><ul><li><a href="#key-system-calls" class="table-of-contents__link toc-highlight">Key system calls</a></li></ul></li><li><a href="#link-vs-file" class="table-of-contents__link toc-highlight">Link vs File</a><ul><li><a href="#key-systemcalls" class="table-of-contents__link toc-highlight">Key systemcalls</a></li></ul></li><li><a href="#interprocess-communication" class="table-of-contents__link toc-highlight">Interprocess Communication</a><ul><li><a href="#how-does-io-redirection-word" class="table-of-contents__link toc-highlight">How does I/O redirection word?</a></li><li><a href="#socket-communication" class="table-of-contents__link toc-highlight">Socket Communication</a></li></ul></li><li><a href="#signals" class="table-of-contents__link toc-highlight">Signals</a><ul><li><a href="#key-signals" class="table-of-contents__link toc-highlight">Key Signals</a></li><li><a href="#signal-generation-delivery-and-handling" class="table-of-contents__link toc-highlight">Signal generation, delivery and handling</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 amirhnajafiz. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>