<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-System Security/vm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Processor and Virtual Machine Security | GraphHub</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://amirhnajafiz.github.io/graphhub/img/graphhub.jpeg"><meta data-rh="true" name="twitter:image" content="https://amirhnajafiz.github.io/graphhub/img/graphhub.jpeg"><meta data-rh="true" property="og:url" content="https://amirhnajafiz.github.io/graphhub/docs/System Security/vm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Processor and Virtual Machine Security | GraphHub"><meta data-rh="true" name="description" content="In this chapter, we focuse on processors and VMs security levels. Moreover, we will see how we can use VMs in security applications."><meta data-rh="true" property="og:description" content="In this chapter, we focuse on processors and VMs security levels. Moreover, we will see how we can use VMs in security applications."><link data-rh="true" rel="icon" href="/graphhub/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/vm"><link data-rh="true" rel="alternate" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/vm" hreflang="en"><link data-rh="true" rel="alternate" href="https://amirhnajafiz.github.io/graphhub/docs/System Security/vm" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/graphhub/assets/css/styles.3b7036f8.css">
<script src="/graphhub/assets/js/runtime~main.5c17c8d5.js" defer="defer"></script>
<script src="/graphhub/assets/js/main.33e4513b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/graphhub/"><b class="navbar__title text--truncate">GraphHub</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/graphhub/docs/">Graphs</a><a class="navbar__item navbar__link" href="/graphhub/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/amirhnajafiz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS darkNavbarColorModeToggle_X3D1" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphhub/docs/">Welcome to GraphHub!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/graphhub/docs/System Security/intro">System Security</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/intro">Computer Systems Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/memerr-rand">Memory Errors: Exploits and Defenses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphhub/docs/System Security/vm">Processor and Virtual Machine Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/os">Operating System Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/crypto">Cryptography</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/auth">Authentication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphhub/docs/System Security/policies">Security Policies and Enforcement Mechanisms</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/graphhub/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">System Security</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Processor and Virtual Machine Security</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Processor and Virtual Machine Security</h1></header>
<p>In this chapter, we focuse on processors and VMs security levels. Moreover, we will see how we can use VMs in security applications.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="processor-security">Processor Security<a href="#processor-security" class="hash-link" aria-label="Direct link to Processor Security" title="Direct link to Processor Security">​</a></h2>
<p>Processors operate at multiple privilege levels. At least two levels
are needed, privileged and unprivileged.</p>
<ul>
<li><strong>Ring 0</strong> is highes privilege (kernel-level)</li>
<li><strong>Ring 3</strong> is lowest privilege (user-level)</li>
</ul>
<p>OS kernel runs in Ring 0, while user-level code executes in unprivileged mode. Improtant processor state can be changed only throught the execution of privileged instruction.</p>
<ul>
<li>Page tables</li>
<li>I/O devices</li>
</ul>
<p>As a result, only the kernel code can change critical processor state. However, there is no control for transfers across privilege levels. So, privileged crossings are usually effected via interrupts. These interrupts are like request messages.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="virtualization-is-oses">Virtualization is OSes<a href="#virtualization-is-oses" class="hash-link" aria-label="Direct link to Virtualization is OSes" title="Direct link to Virtualization is OSes">​</a></h2>
<p>Creation of logical instances of physical resources. Same functions, without rewriting the whole thing. Resources to virtualize are:</p>
<ul>
<li>CPU</li>
<li>Memory</li>
<li>I/O devices</li>
</ul>
<p>Some resources are shared using high level interfaces rather than virtualization. Since only OS can control and manage system resources and share them safely across user-level processes, resources are often virtualized. It is as if a user-level process has an exclusive, private copy of that
resource.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-virtualization">System Virtualization<a href="#system-virtualization" class="hash-link" aria-label="Direct link to System Virtualization" title="Direct link to System Virtualization">​</a></h2>
<p>Creates several virtual systems within a single physical system. This virtual should still provide privileged instructions, so that OS kernels can run on top. <strong>VVM (hypervisor)</strong> is the software layer providing the virtualization. VM runs on top of the VMM. VMM runs in kernel-level (Ring 0).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="process-virtualization">Process virtualization<a href="#process-virtualization" class="hash-link" aria-label="Direct link to Process virtualization" title="Direct link to Process virtualization">​</a></h3>
<p>The VM supports an application binary interface that uses interrupts and system-calls. (JWM)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="os-or-namespace-virtualization">OS or Namespace virtualization<a href="#os-or-namespace-virtualization" class="hash-link" aria-label="Direct link to OS or Namespace virtualization" title="Direct link to OS or Namespace virtualization">​</a></h3>
<p>Having multiple logical VMs that share the same OS kernel. Isolates VMs by partitioning all objects into namespaces. (Docker, vServer)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="full-virtualization">Full virtualization<a href="#full-virtualization" class="hash-link" aria-label="Direct link to Full virtualization" title="Direct link to Full virtualization">​</a></h3>
<p>The VM supports a complete ISA and user and system instructions. (VirtualBox)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vmm-architectures">VMM Architectures<a href="#vmm-architectures" class="hash-link" aria-label="Direct link to VMM Architectures" title="Direct link to VMM Architectures">​</a></h3>
<p>There are two types of VMM, <strong>baremetal</strong> and <strong>hosted</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-1-baremetal">Type 1 (baremetal)<a href="#type-1-baremetal" class="hash-link" aria-label="Direct link to Type 1 (baremetal)" title="Direct link to Type 1 (baremetal)">​</a></h4>
<p>The VMM runs on bare hardware.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++| |+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| guest application | | guest application |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++| |+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  multi guest OS  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        VMM        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   host hardware   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="type-2-hosted">Type 2 (hosted)<a href="#type-2-hosted" class="hash-link" aria-label="Direct link to Type 2 (hosted)" title="Direct link to Type 2 (hosted)">​</a></h4>
<p>The VMM runs as an ordinary application inside host OS.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++| |+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| guest application | | guest application |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++| |+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|  multi guest OS  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        VMM        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| host operating system |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">===========================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|   host hardware   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|+++++++++++++++++++|</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-issues-in-cpu-virtualization">Key issues in CPU virtualization<a href="#key-issues-in-cpu-virtualization" class="hash-link" aria-label="Direct link to Key issues in CPU virtualization" title="Direct link to Key issues in CPU virtualization">​</a></h3>
<ul>
<li>Protection levels.</li>
<li>Requirement for efficient virtualization. Privileged instructions will be executed as traps if they come from user-level. Sensitive instructions are the ones that affect important system state. Therefore, if an instruction is privileged and sensitive, it can support efficient <strong>trap and emulate</strong> approach.</li>
<li>For x86, not all sensitive instructions are privileged.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="virtualization-approaches">Virtualization Approaches<a href="#virtualization-approaches" class="hash-link" aria-label="Direct link to Virtualization Approaches" title="Direct link to Virtualization Approaches">​</a></h3>
<ul>
<li><strong>Full virtualization</strong> using binary translation: needs disassemble the binary, identify instructions and patch them. Rely dynamic disassembly and translation in order to make disassembly tractable, and to support dynamic changes to code. (like VMware or QEMU)</li>
<li><strong>Paravirtualization</strong>: OS modified to run on VMM, then it uses Hypercalls. It is no longer 100% interface compatible, but has better performance. (like Xen)</li>
<li><strong>Harware-assisted virtualization</strong>: OS requests trap to VMM without binary translation or paravirtualization. Separates CPU execution into two modes. Hypervisor executes in host mode, and all VMs execute in guest mode. (most VMMs today)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-virtualization">Memory Virtualization<a href="#memory-virtualization" class="hash-link" aria-label="Direct link to Memory Virtualization" title="Direct link to Memory Virtualization">​</a></h3>
<p>Access to MMU needs to be virtualized, otherwise guest OS may directly access physical memory and subvert VMM. Physical memory is divided among multiple VMs with two levels of translation in Guest OS and VMM.</p>
<ul>
<li>Guest OS: guest virtual addr <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em"></span><span class="mrel">→</span></span></span></span> guest physical addr</li>
<li>VMM: guest physical addr <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em"></span><span class="mrel">→</span></span></span></span> machine addr</li>
</ul>
<p>Shadow page table is needed to avoid 2-step translation. By using shadow page, when guest attempts to update, VMM intercepts and emulate the effects on the corresponding shadow page table.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="io-virtualization">I/O Virtualization<a href="#io-virtualization" class="hash-link" aria-label="Direct link to I/O Virtualization" title="Direct link to I/O Virtualization">​</a></h3>
<p>The VMM intercepts guest&#x27;s I/O-performing instructions. Performs necessary actions to emulate their effect. This emulations leads to low performance for most I/O operations. Compared to CPU and memory, that are executed with less extra operations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vms-security-applications-and-concerns">VMs security applications and concerns<a href="#vms-security-applications-and-concerns" class="hash-link" aria-label="Direct link to VMs security applications and concerns" title="Direct link to VMs security applications and concerns">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-applications">Security Applications<a href="#security-applications" class="hash-link" aria-label="Direct link to Security Applications" title="Direct link to Security Applications">​</a></h3>
<p>VM technology provides strong isolation that is necessary to run malware
without undue risks. (Strong resource isolation and snapshot/restore features)</p>
<ul>
<li><strong>Honypots systems</strong></li>
<li><strong>Malware analysis</strong></li>
</ul>
<p>Basically, it is using VMs for less damage and keep alignment in guest OS. Also, it provides protection from compromised OSes. Running malware and rootkit detection techniques in VMM, or enforce security properties from within the VMM.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="rootkit">Rootkit<a href="#rootkit" class="hash-link" aria-label="Direct link to Rootkit" title="Direct link to Rootkit">​</a></h4>
<p>A rootkit, is a set of software tools that enable an unauthorized user to gain control of a computer system without being detected.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-challenges-in-virtualized-environments">Security challenges in virtualized environments<a href="#security-challenges-in-virtualized-environments" class="hash-link" aria-label="Direct link to Security challenges in virtualized environments" title="Direct link to Security challenges in virtualized environments">​</a></h3>
<p>Since virtualization leads to <strong>co-tenancy</strong>, it has challenges.</p>
<ul>
<li>VMs belonging to distinct principals use the same hadrware. Therefor, it needs strong isolation.</li>
<li>It provides increased opportunities for side-channel attacks.</li>
<li>Also, Denail of service is hard to prevent.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker-security">Docker security<a href="#docker-security" class="hash-link" aria-label="Direct link to Docker security" title="Direct link to Docker security">​</a></h3>
<p>It uses <strong>namespaces</strong> and <strong>cgroups</strong> to isolate its containers. It also has a container infrastructure and services (<strong>docker daemon</strong>). Containerscan share files with the host OS, but this can be dangerous since it can allow root user in a container to change critical host OS files.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-attack-vectors">Docker attack vectors<a href="#docker-attack-vectors" class="hash-link" aria-label="Direct link to Docker attack vectors" title="Direct link to Docker attack vectors">​</a></h4>
<ul>
<li>Shared kernel: it is using same OS kernel across different containers. Any kernel vulnerabilities may be exploited.</li>
<li>Docker daemon needs root privileges. So, malicious processes may abuse this privilege.</li>
<li>Apps running within Docker can reach to the host by sharing folders. Or, root processes inside container can possibly execute systemcalls as root on host.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-security-practices">Docker security practices<a href="#docker-security-practices" class="hash-link" aria-label="Direct link to Docker security practices" title="Direct link to Docker security practices">​</a></h4>
<ul>
<li>Avoid root privilege.</li>
<li>Limit further using linux capabilities.</li>
<li>Use seccomp-bpf to limit system calls that can be made by processes within the container.</li>
<li>Avoid using untrusted software.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes-and-comments">Notes and Comments<a href="#notes-and-comments" class="hash-link" aria-label="Direct link to Notes and Comments" title="Direct link to Notes and Comments">​</a></h2>
<ul>
<li><strong>Fault isolation</strong> means that a fault occurring in one module will not corrupt a different module. Operating systems use hardware features (such as page tables or segmentation harware) to realize fault isolation between user processes.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/graphhub/docs/System Security/memerr-rand"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Memory Errors: Exploits and Defenses</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/graphhub/docs/System Security/os"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Operating System Security</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#processor-security" class="table-of-contents__link toc-highlight">Processor Security</a></li><li><a href="#virtualization-is-oses" class="table-of-contents__link toc-highlight">Virtualization is OSes</a></li><li><a href="#system-virtualization" class="table-of-contents__link toc-highlight">System Virtualization</a><ul><li><a href="#process-virtualization" class="table-of-contents__link toc-highlight">Process virtualization</a></li><li><a href="#os-or-namespace-virtualization" class="table-of-contents__link toc-highlight">OS or Namespace virtualization</a></li><li><a href="#full-virtualization" class="table-of-contents__link toc-highlight">Full virtualization</a></li><li><a href="#vmm-architectures" class="table-of-contents__link toc-highlight">VMM Architectures</a></li><li><a href="#key-issues-in-cpu-virtualization" class="table-of-contents__link toc-highlight">Key issues in CPU virtualization</a></li><li><a href="#virtualization-approaches" class="table-of-contents__link toc-highlight">Virtualization Approaches</a></li><li><a href="#memory-virtualization" class="table-of-contents__link toc-highlight">Memory Virtualization</a></li><li><a href="#io-virtualization" class="table-of-contents__link toc-highlight">I/O Virtualization</a></li></ul></li><li><a href="#vms-security-applications-and-concerns" class="table-of-contents__link toc-highlight">VMs security applications and concerns</a><ul><li><a href="#security-applications" class="table-of-contents__link toc-highlight">Security Applications</a></li><li><a href="#security-challenges-in-virtualized-environments" class="table-of-contents__link toc-highlight">Security challenges in virtualized environments</a></li><li><a href="#docker-security" class="table-of-contents__link toc-highlight">Docker security</a></li></ul></li><li><a href="#notes-and-comments" class="table-of-contents__link toc-highlight">Notes and Comments</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 amirhnajafiz. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>